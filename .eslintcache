[{"I:\\Workspace\\interactive_video\\src\\App.js":"1","I:\\Workspace\\interactive_video\\src\\reportWebVitals.js":"2","I:\\Workspace\\interactive_video\\src\\index.js":"3"},{"size":4897,"mtime":1610585870285,"results":"4","hashOfConfig":"5"},{"size":362,"mtime":1610381878709,"results":"6","hashOfConfig":"5"},{"size":500,"mtime":1610381878709,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"10"},"1p6q8ol",{"filePath":"11","messages":"12","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"13","messages":"14","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"I:\\Workspace\\interactive_video\\src\\App.js",["15","16","17","18"],"import './App.css';\nimport \"./video-react.css\";\nimport { Player, BigPlayButton  } from 'video-react';\nimport React, { useEffect, useState } from 'react';\n\nfunction App() {   \n\n  const playerIns = React.createRef();\n\n  const [videoLink, setVideoLink] = useState(\"\");\n  const [nextVideo, setNextVideo] = useState(\"\");\n  const [currentVideo, setCurrentVideo] = useState(\"\");\n  const [showInteraction, setShowInteraction] = useState(false);\n  const [interection, setInterection] = useState(\"\");\n  const [changes, setChanges] = useState({});\n\n\n  let script = {\n    start: {\n      videoUrl: './20210107_175931.mp4',\n      startVideo: '0',\n      endVideo: '18',\n      interactionStart: '10',\n      interactionEnd: '18',\n      decisions: [\n        {\n          text: 'Esqueda',\n          imgUrl: '',\n          sequenceVideoId: 'cozinha',\n          default: true\n        },\n        {\n          text: 'Direita',\n          imgUrl: '',\n          sequenceVideoId: 'quarto'\n        }\n      ]\n\n    },\n    cozinha: {\n      videoUrl: './20210107_180011.mp4',\n      startVideo: '0',\n      endVideo: '25',\n      interactionStart: '17',\n      interactionEnd: '22',\n      decisions: [\n        {\n          text: 'ðŸ¥½',\n          imgUrl: '',\n          sequenceVideoId: 'pool',\n          default: true\n        },\n        {\n          text: 'ðŸŒŠ',\n          imgUrl: '',\n          sequenceVideoId: 'ocean'\n        }\n      ]\n    },\n    quarto: {\n      videoUrl: './20210107_175954.mp4',\n      startVideo: '0',\n      endVideo: '07',\n      interactionStart: '2',\n      interactionEnd: '6',\n      decisions: [\n        {\n          text: 'ðŸ‘',\n          imgUrl: '',\n          sequenceVideoId: 'eye',\n          default: true\n        },\n        {\n          text: 'ðŸŒž',\n          imgUrl: '',\n          sequenceVideoId: 'light'\n        },\n        {\n          text: 'ðŸŒš',\n          imgUrl: '',\n          sequenceVideoId: 'moon'\n        }\n      ]\n    },\n\n    pool: {\n      videoUrl: './pool.mp4',\n      startVideo: '0',\n      endVideo: '35',\n    },\n    ocean: {\n      videoUrl: './ocean.mp4',\n      startVideo: '0',\n      endVideo: '29',\n    },\n    eye: {\n      videoUrl: './eye.mp4',\n      startVideo: '0',\n      endVideo: '24',\n    },\n    moon: {\n      videoUrl: './moon.mp4',\n      startVideo: '0',\n      endVideo: '23',\n    },\n    light: {\n      videoUrl: './light_on_bed.mp4',\n      startVideo: '0',\n      endVideo: '10',\n    },\n\n  }\n\n  const loadVideo = (id) => {     \n    let sequence = script[id];\n    setShowInteraction(false);\n    setCurrentVideo(sequence);  \n    \n    if(sequence.videoUrl != currentVideo.videoUrl)\n    setVideoLink(sequence.videoUrl); \n  }\n\n  function loadDefaultNextVideo(sequence) {    \n    let next_video;\n    let next_config;\n    if (sequence.decisions) {\n      next_config = sequence.decisions.find(element => element.default);\n      if (!next_config) {\n        next_config = sequence.decisions[0]\n      }\n      next_video = next_config.sequenceVideoId\n    } else {\n      next_video = undefined;\n    }\n    \n    setNextVideo(next_video);\n    console.log('loadDefaultNextVideo try set', next_video, 'nextVideo', nextVideo)\n  }\n\n  const initPlayer = () => {\n    loadVideo(\"start\")\n  }\n\n  const startInteraction = () => {\n    console.log('startInteraction')\n    if(!showInteraction) {  \n      setShowInteraction(true)\n    }\n  }\n\n  const endInteraction = () => {\n    console.log('startInteraction')\n    if(!showInteraction) {  \n      setShowInteraction(false)\n    }\n  }\n\n  const endVideo = () => {\n    if(nextVideo) {\n      loadVideo(nextVideo);      \n    }     \n  }\n\n  useEffect(() => {    \n    let state = changes;\n    if (Math.round(state.currentTime) >= currentVideo.interactionStart) {\n      startInteraction()\n    }\n\n    if (Math.round(state.currentTime) >= currentVideo.interactionEnd) {\n      endInteraction()\n    }\n\n    if (Math.round(state.currentTime) >= currentVideo.endVideo) {\n      endVideo()\n    }\n  }, [changes]);\n\n  useEffect(() => {    \n    initPlayer();\n    playerIns.current.subscribeToStateChange(setChanges);    \n  }, []);\n \n\n  useEffect(() => {    \n    let player = playerIns.current; \n    loadDefaultNextVideo(currentVideo);\n    player.load();      \n    player.seek(currentVideo.startVideo);\n    player.play(); \n  }, [currentVideo]);\n\n  useEffect(()=> {  \n    if(interection)\n    setNextVideo(interection);\n  }, [interection])\n\n  return (\n    <div className=\"player_box\">\n       \n      <Player src={videoLink} ref={playerIns} playsInline >\n      <BigPlayButton position=\"center\" hidden />\n      </Player>\n\n      <div className=\"decisions\">\n        {showInteraction && currentVideo.decisions && currentVideo.decisions.map((el) => \n        <button className=\"decision\" key={el.text} onClick={ () => {\n          setInterection(el.sequenceVideoId)\n          } }> \n          {el.text}\n        </button>   \n      )}\n      </div>\n     \n\n      \n    </div>\n  );\n}\n\nexport default App;\n","I:\\Workspace\\interactive_video\\src\\reportWebVitals.js",[],"I:\\Workspace\\interactive_video\\src\\index.js",[],{"ruleId":"19","severity":1,"message":"20","line":119,"column":26,"nodeType":"21","messageId":"22","endLine":119,"endColumn":28},{"ruleId":"23","severity":1,"message":"24","line":177,"column":6,"nodeType":"25","endLine":177,"endColumn":15,"suggestions":"26"},{"ruleId":"23","severity":1,"message":"27","line":182,"column":6,"nodeType":"25","endLine":182,"endColumn":8,"suggestions":"28"},{"ruleId":"23","severity":1,"message":"29","line":191,"column":6,"nodeType":"25","endLine":191,"endColumn":20,"suggestions":"30"},"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'currentVideo.endVideo', 'currentVideo.interactionEnd', 'currentVideo.interactionStart', 'endInteraction', 'endVideo', and 'startInteraction'. Either include them or remove the dependency array.","ArrayExpression",["31"],"React Hook useEffect has missing dependencies: 'initPlayer' and 'playerIns'. Either include them or remove the dependency array.",["32"],"React Hook useEffect has missing dependencies: 'loadDefaultNextVideo' and 'playerIns'. Either include them or remove the dependency array.",["33"],{"desc":"34","fix":"35"},{"desc":"36","fix":"37"},{"desc":"38","fix":"39"},"Update the dependencies array to be: [changes, currentVideo.endVideo, currentVideo.interactionEnd, currentVideo.interactionStart, endInteraction, endVideo, startInteraction]",{"range":"40","text":"41"},"Update the dependencies array to be: [initPlayer, playerIns]",{"range":"42","text":"43"},"Update the dependencies array to be: [currentVideo, loadDefaultNextVideo, playerIns]",{"range":"44","text":"45"},[3905,3914],"[changes, currentVideo.endVideo, currentVideo.interactionEnd, currentVideo.interactionStart, endInteraction, endVideo, startInteraction]",[4027,4029],"[initPlayer, playerIns]",[4228,4242],"[currentVideo, loadDefaultNextVideo, playerIns]"]